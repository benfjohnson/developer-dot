<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="index,follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer  : How is tax calculated?</title>
    <meta name="description" content="">

    <meta property="og:title" content="Home"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://developer.avalara.com/"/>
    <meta property="og:site_name" content="Avalara Developer Network"/>
    <meta property="og:description" content="Avalara AvaTax Accurate and easy sales tax calculation Automatically tie your non-taxable transactions directly to the correct exemption or reseller certificate. Determine accurate taxability & duties for millions of products and services in over 100 countries."/>

    <link rel="apple-touch-icon" sizes="57x57" href="/public/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/public/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/public/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/public/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/public/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/public/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/public/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/public/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/public/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/public/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/public/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff ">
    <meta name="msapplication-TileImage" content="/public/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff ">

    <link rel="stylesheet" href="/public/css/style.css">
    
</head>


<body id="top" data-spy="scroll" data-target="#bootstrap-scrollspy" data-product=avaTax>
<header>
    <div class="pageTitle">
        <a href="/">
            <img src="/public/images/Avalara_logo.svg" alt="Avalara Developer Network">
            <span>Developer</span>
        </a>
        <span class="slash">/&nbsp;</span><a href="/avatax">avaTax</a>
    </div>
    <nav class="navbar navbar-default navbar-static">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                <span>Menu</span>
            </button>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse">
            <ul class="nav navbar-nav ">
                <li class="home"><a href="/"><span class="text-uppercase">Welcome</span></a></li>
                <li class="apis visible-xs-block"><a href="/avalara-apis"><span class="text-uppercase">API</span>s</a></li>
                <li class="apis dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">API</span>s <i class="caret"></i></a>
                    <div class="dropdown-menu dropdown-menu-large">
                        <div class="row">
                            <div class="col-md-12"><a href="/avalara-apis">APIs overview</a></div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <h2>Tax calculation</h2>
                                
                                <h4>Avalara AvaTax</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/avatax">Overview</a></li>
                                    
                                    <li><a href="/avatax/use-cases">Use cases</a></li>
                                    
                                    <li><a href="/avatax/api-reference/tax/v1">API references</a></li>
                                    
                                    <li><a href="/avatax/get-started">Set up your sandbox</a></li>
                                    
                                    <li><a href="/avatax/testing-your-integration">Test your integration</a></li>
                                    
                                    <li><a href="/avatax/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Communications</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/communications">Overview</a></li>
                                    
                                    <li><a href="/communications/api-reference/saas/soap">API references</a></li>
                                    
                                    <li><a href="/communications/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Excise</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/excise">Overview</a></li>
                                    
                                    <li><a href="/excise/api-reference/tax-determination/v5_18_0">API references</a></li>
                                    
                                    <li><a href="/excise/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara LandedCost</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/landedcost">Overview</a></li>
                                    
                                    <li><a href="/landedcost/api-reference/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                            <div class="col-sm-4">
                                <h2>Compliance document management</h2>
                                
                                <h4>Avalara CertCapture</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/certcapture">Overview</a></li>
                                    
                                    <li><a href="http://docs.certcapture6xrest.apiary.io/">API references</a></li>
                                    
                                    <li><a href="/certcapture/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                <h2>Returns &amp; filing</h2>
                                
                                
                                <h4>Avalara TrustFile</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/trustfile">Overview</a></li>
                                    
                                    <li><a href="/trustfile/api-reference/core/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                        </div>
                    </div>
                </li>
                <li class="certification"><a href="/certification"><span class="text-uppercase">Become Certified</span></a></li>
                <li class="resources dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Resources</span> <b class="caret"></b></a>
                    <ul class="dropdown-menu dropdown-menu-large">
                        <li><a href="/blog">Developer Blog</a></li>
                        <li><a href="/resources/preferred-developers">Preferred developers</a></li>
                        <li><a href="https://community.avalara.com/avalara/category_sets/developers">Help Forum</a></li>
                    </ul>
                </li>
                <li class="resources visible-xs-block"><a href="/blog"><span class="text-uppercase">Developer Blog</span></a></li>
                <li class="resources visible-xs-block"><a href="/resources/preferred-developers"><span class="text-uppercase">Preferred developers</span></a></li>
                <li class="resources visible-xs-block"><a href="https://community.avalara.com/avalara/category_sets/developers"><span class="text-uppercase">Help Forum</span></a></li>
                <li class="resources visible-xs-block"><a href="/search"><span class="text-uppercase">Search</span></a></li>
                <li class="hdr-search-icon hidden-xs">
                    <i class="mouse glyphicon glyphicon-search mouse"></i>
                </li>
                <form class="hdr-search-form horizontal hidden-xs hidden">
                    <div class="row">
                        
                        <div class="col-md-9"><label><input type="checkbox" id="filterSite"> Search entire site</label></div>
                        <div class="col-md-3">
                            <button type="button" class="close" aria-label="Close"><span>&times;</span></button>
                        </div>
                        
                    </div>
                    <div class="row">
                        <div class="form-group col-md-9">
                            <input class="form-control" type="search" placeholder="Search Developer / Avatax" >
                            <span class="form-control-feedback">!</span>
                        </div>
                        <div class="form-group col-md-3">
                            <input type="submit" class="btn btn-primary" value="Search">
                        </div>
                    </div>
                </form>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid blog">
    
    
    <section class="row padding-sides">
        <main class="col-md-12">
<div class="breadcrumbs blog">
    <div class="col-md-12">
        <ul class="pipe">
            <li class="text-uppercase">Resources</li>
            <li class="text-uppercase"><a href="/blog">Developer Blog</a></li>
            
            <li class="text-uppercase">How is tax calculated?</li>
            
        </ul>
    </div>
</div>



<div class="half">
    <h1>How is tax calculated?</h1>
    <p class="byline">By anya.stettler | September 11, 2015</p>
    <p class="blog-content"><p><img src="/public/images/blog/shutterstock_310565729.jpg" width="167" height="250" alt="parfait dessert with many layers, just like tax determination" /></p>

<p>When you look through the API documentation, you notice a bunch of required and ‘situationally required’ fields. What gives? What do we do with all that information anyway?</p>

<p>Well, like the parfait dessert pictured, sales tax has many (colorful) layers. All of that information provided helps us to make an accurate (and precise!) determination on the calculation we return, in a number of ways.</p>

<p>Let’s take a look at a hypothetical invoice. This is just the barebones required information, with our request on the left and response on the right. Note that if you’re following along in your test environment, you might get different results! That’s just fine! We’ll talk about that as we dig into the calculation.</p>

<p>In our sample request, I’ve specified</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s2">"DetailLevel"</span><span class="err">:</span> <span class="s2">"Summary"</span></code></pre></figure>

<p>to shorten our results, but you can see the full detail by leaving out this parameter, or by specifying</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s2">"DetailLevel"</span><span class="err">:</span> <span class="s2">"Tax"</span></code></pre></figure>

<p>Request:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
<span class="s2">"DocDate"</span><span class="err">:</span> <span class="s2">"2015-09-08"</span><span class="p">,</span>
<span class="s2">"DocCode"</span><span class="err">:</span> <span class="s2">"00501-IN"</span><span class="p">,</span>
<span class="s2">"CustomerCode"</span><span class="err">:</span> <span class="s2">"0000"</span><span class="p">,</span>
<span class="s2">"DetailLevel"</span><span class="err">:</span> <span class="s2">"Summary"</span><span class="p">,</span>
<span class="s2">"Addresses"</span><span class="err">:</span>
<span class="p">[</span>
<span class="p">{</span>
<span class="s2">"AddressCode"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
<span class="s2">"Line1"</span><span class="p">:</span> <span class="s2">"435 Ericksen Avenue Northeast"</span><span class="p">,</span>
<span class="s2">"PostalCode"</span><span class="p">:</span> <span class="s2">"98110"</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="s2">"AddressCode"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
<span class="s2">"Line1"</span><span class="p">:</span> <span class="s2">"PO Box 123"</span><span class="p">,</span>
<span class="s2">"City"</span><span class="p">:</span><span class="s2">"Raleigh"</span><span class="p">,</span>
<span class="s2">"Region"</span><span class="p">:</span><span class="s2">"NC"</span><span class="p">,</span>
<span class="s2">"PostalCode"</span><span class="p">:</span> <span class="s2">"27602"</span>
<span class="p">}</span>
<span class="p">],</span>
<span class="s2">"Lines"</span><span class="err">:</span>
<span class="p">[</span>
<span class="p">{</span>
<span class="s2">"LineNo"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
<span class="s2">"DestinationCode"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
<span class="s2">"OriginCode"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
<span class="s2">"Qty"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="s2">"Amount"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="s2">"TaxCode"</span><span class="p">:</span><span class="s2">"SC100502"</span>
<span class="p">},</span>
<span class="p">{</span>
<span class="s2">"LineNo"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
<span class="s2">"DestinationCode"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
<span class="s2">"OriginCode"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
<span class="s2">"Qty"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="s2">"Amount"</span><span class="p">:</span> <span class="mi">75</span>
<span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<p>Response:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
    <span class="s2">"ResultCode"</span><span class="err">:</span> <span class="s2">"Success"</span><span class="p">,</span>
    <span class="s2">"DocCode"</span><span class="err">:</span> <span class="s2">"93ac90e0-d2d9-42ac-8a0e-0e59884d3b46"</span><span class="p">,</span>
    <span class="s2">"DocDate"</span><span class="err">:</span> <span class="s2">"2015-09-11"</span><span class="p">,</span>
    <span class="s2">"Timestamp"</span><span class="err">:</span> <span class="s2">"2015-09-08T19:36:04.1929437Z"</span><span class="p">,</span>
    <span class="s2">"TotalAmount"</span><span class="err">:</span> <span class="s2">"175"</span><span class="p">,</span>
    <span class="s2">"TotalDiscount"</span><span class="err">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="s2">"TotalExemption"</span><span class="err">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="s2">"TotalTaxable"</span><span class="err">:</span> <span class="s2">"175"</span><span class="p">,</span>
    <span class="s2">"TotalTax"</span><span class="err">:</span> <span class="s2">"11.81"</span><span class="p">,</span>
    <span class="s2">"TotalTaxCalculated"</span><span class="err">:</span> <span class="s2">"11.81"</span><span class="p">,</span>
    <span class="s2">"TaxDate"</span><span class="err">:</span> <span class="s2">"2015-09-11"</span><span class="p">,</span>
    <span class="s2">"TaxSummary"</span><span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Country"</span><span class="p">:</span> <span class="s2">"US"</span><span class="p">,</span>
            <span class="s2">"Region"</span><span class="p">:</span> <span class="s2">"NC"</span><span class="p">,</span>
            <span class="s2">"JurisType"</span><span class="p">:</span> <span class="s2">"State"</span><span class="p">,</span>
            <span class="s2">"JurisCode"</span><span class="p">:</span> <span class="s2">"37"</span><span class="p">,</span>
            <span class="s2">"Taxable"</span><span class="p">:</span> <span class="s2">"175"</span><span class="p">,</span>
            <span class="s2">"Rate"</span><span class="p">:</span> <span class="s2">"0.047500"</span><span class="p">,</span>
            <span class="s2">"Tax"</span><span class="p">:</span> <span class="s2">"8.31"</span><span class="p">,</span>
            <span class="s2">"JurisName"</span><span class="p">:</span> <span class="s2">"NORTH CAROLINA"</span><span class="p">,</span>
            <span class="s2">"TaxName"</span><span class="p">:</span> <span class="s2">"NC STATE TAX"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">"Country"</span><span class="p">:</span> <span class="s2">"US"</span><span class="p">,</span>
            <span class="s2">"Region"</span><span class="p">:</span> <span class="s2">"NC"</span><span class="p">,</span>
            <span class="s2">"JurisType"</span><span class="p">:</span> <span class="s2">"County"</span><span class="p">,</span>
            <span class="s2">"JurisCode"</span><span class="p">:</span> <span class="s2">"183"</span><span class="p">,</span>
            <span class="s2">"Taxable"</span><span class="p">:</span> <span class="s2">"175"</span><span class="p">,</span>
            <span class="s2">"Rate"</span><span class="p">:</span> <span class="s2">"0.020000"</span><span class="p">,</span>
            <span class="s2">"Tax"</span><span class="p">:</span> <span class="s2">"3.5"</span><span class="p">,</span>
            <span class="s2">"JurisName"</span><span class="p">:</span> <span class="s2">"WAKE"</span><span class="p">,</span>
            <span class="s2">"TaxName"</span><span class="p">:</span> <span class="s2">"NC COUNTY TAX"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<p>Okay, so what’s happening here? Lets break it down.</p>

<p>There are three main levels of tax calculation: customer taxability, product taxability, and tax profile. The application of these three levels results in the tax calculation you see returned by the API and/or recorded in AvaTax.</p>

<p><strong>Customer Taxability</strong></p>

<p>First, we have our customer taxability fields: Exemption Number, Entity/Use Code, and (in some setups) CustomerCode.  If the customer is flagged as exempt, that will put any sales in that transaction in the Exempt bucket for applicable jurisdictions, and no sales tax will be charged on them, regardless of product taxability. Most methods of customer-based exemption are exempt in all triggered jurisdictions, but some notable exceptions (e.g. the “Local Government” exempt reason in either an Entity/Use Code or Exempt Reason for an Exemption Certificate) do exist. In those cases, the sales are only exempt in the applicable jurisdictions, and all other sales are subject to item taxability as normal.</p>

<p>ExemptionNo: This is a field that, if it is populated with data, exempts the transaction from sales tax entirely. If, in our request, we had populated this with “EXEMPT”, our transaction would be exempt from sales tax. You can’t see the Exemption Number reported in the Document Detail view from the Transactions tab in the Admin Console, but it is exposed if you drill into Document Edit Mode.</p>

<p>CustomerUsageType: Also called Entity/Use Code, this associates a customer taxability profile with a transaction. This can be one of our system-set customer taxability profiles (e.g. Retail or Local Government), or it can be one that you have created rules for in your dashboard. If we had populated this with “G” in our request, AvaTax would know that this corresponds to a retailer, and our transaction would be exempt in all jurisdictions.</p>

<p>CustomerCode: This is only a concern if you’re managing exempt customers through CertCapture, or directly in the ECMS on the Admin Console.  If the customer code matches an exemption certificate on file, the destination address is in a state listed in the Regions Applicable on a non-revoked certificate, and the transaction falls within the listed date range, the certificate will be applied to the transaction.  This application is also contingent on your ECMS Settings: this module is available to all accounts, but is disabled by default.</p>

<p><strong>Product Taxability</strong></p>

<p>The taxability of the tax codes passed in the destination state determines the item taxability. Taxability for a single code may vary state to state, or local jurisdiction to local jurisdiction. If the tax code assigned to the line is taxable in the destination state, the sales are flagged as taxable. Similarly, if a code is non-taxable in a given state, the sales are flagged as non-taxable and tax is not assessed. A few codes are pro-rated at different levels of taxability (e.g. half-taxable, or taxable dependent upon the taxability of other items on the transaction). If no tax code is passed, our system assumes that items are taxable in all states, and assigns the system default code of P0000000.</p>

<p><strong>Tax Profile</strong></p>

<p>Once the taxability of the customer and items have been established, the sourced rates are applied to the transaction.  First, sourcing is established; some states source some jurisdictions or products at the origin address for intrastate transactions. Then, those addresses are used to pull the appropriate taxing jurisdictions based on your tax profile and nexus designation. Sales tax or Seller’s use tax is charged depending on your nexus type. Those rates are applied at the line level to your taxable sales. In this case, I have Sales Tax only nexus in North Carolina. Nexus is not administered locally, so nexus at the state level will include all local nexus. My address triggered a state tax of 4.75% and a 2% county level tax for the county of Wake for a total composite rate of 6.75%.</p>

<p>And then we’re done!</p>

<p>This is - if you can believe it - a pretty simplified explanation, and focuses on US calculations. There are other requirements for other tax systems, and even more depth for the calculations described here. If you want to know more about the ins and outs of sales tax calculation, you should take a look at our more detailed <a href="https://help.avalara.com/007_AvalaraUniversity/Online_Product_Training">product training</a> around sales tax.</p>
</p>
    <p class="btn-callout"><a href="/blog" role="button">Back to posts</a></p>
</div>
</main>
    </section>
    
    
</div>
<footer class="navbar navbar-default">
    <ul class="social">
        <li class="twitter"><a href="https://twitter.com/Avalara">Twitter</a></li>
        <li class="facebook"><a href="https://www.facebook.com/avalara">Facebook</a></li>
        <li class="linkedin"><a href="https://www.linkedin.com/company/avalara">LinkedIn</a></li>
        <li class="youtube"><a href="https://www.youtube.com/user/Avalara1">Youtube</a></li>
    </ul>
    
    
    <ul class="github">
        <li><a href="https://github.com/Avalara/developer-dot/edit/master/_posts/2015-09-11-how-is-tax-calculated.md">Edit this page on GitHub</a></li>
    </ul>
    
    <ul class="global">
        <li><a href="https://www.avalara.com/"><span class="icon-sphere"></span>Avalara.com</a></li>
        <li><a href="https://help.avalara.com/"><span class="icon-help"></span>Help Center</a></li>
    </ul>
    <ul class="legal">
        <li>&copy; Avalara, Inc. All rights reserved</li>
        <li><a href="https://www.avalara.com/site-terms/">Terms of use</a></li>
        <li><a href="https://www.avalara.com/privacy-policy/">Privacy Policy</a></li>
    </ul>
</footer>

<script src="/public/js/vendor/jquery-2.2.4.min.js"></script>
<script src="/public/js/vendor/bootstrap.min.js"></script>
<script src="/public/js/site.js"></script>


<script src='/public/js/vendor/aws-sdk-2.5.3.min.js'></script>
<script>AWS.config.region = 'us-west-2';</script>







<!-- Google Tag Manager -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKB5LP" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-MKB5LP');</script>
<!-- End Google Tag Manager -->
</body>
</html>
