<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="index,follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer  : Product Returns</title>
    <meta name="description" content="">

    <meta property="og:title" content="Home"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://developer.avalara.com/"/>
    <meta property="og:site_name" content="Avalara Developer Network"/>
    <meta property="og:description" content="Avalara AvaTax Accurate and easy sales tax calculation Automatically tie your non-taxable transactions directly to the correct exemption or reseller certificate. Determine accurate taxability & duties for millions of products and services in over 100 countries."/>

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff ">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff ">

    <link rel="stylesheet" href="/public/css/style.css">
    
</head>




<body id="top" data-spy="scroll" data-target="#bootstrap-scrollspy" data-product=avaTax>
<header>
    <div class="pageTitle">
        <a href="/">
            <img src="/public/images/AvLogo.svg" alt="Avalara Developer Network">
            <span>Developer</span>
        </a>
        <span class="slash">/&nbsp;</span><a href="/avatax">avaTax</a>
    </div>
    <nav class="navbar navbar-default navbar-static">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                <span>Menu</span>
            </button>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse">
            <ul class="nav navbar-nav apis">
                <li class="home"><a href="/"><span class="text-uppercase">Welcome</span></a></li>
                <li class="apis visible-xs-block"><a href="/avalara-apis"><span class="text-uppercase">API</span>s</a></li>
                <li class="apis dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">API</span>s <i class="caret"></i></a>
                    <div class="dropdown-menu dropdown-menu-large">
                        <div class="row">
                            <div class="col-md-12"><a href="/avalara-apis">APIs overview</a></div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <h2>Tax calculation</h2>
                                
                                <h4>Avalara AvaTax</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/avatax">Overview</a></li>
                                    
                                    <li><a href="/avatax/use-cases">Use cases</a></li>
                                    
                                    <li><a href="/avatax/api-reference/tax/v1">API references</a></li>
                                    
                                    <li><a href="/avatax/get-started">Set up your sandbox</a></li>
                                    
                                    <li><a href="/avatax/testing-your-integration">Test your integration</a></li>
                                    
                                    <li><a href="/avatax/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Communications</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/communications">Overview</a></li>
                                    
                                    <li><a href="/communications/api-reference/saas/soap">API references</a></li>
                                    
                                    <li><a href="/communications/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Excise</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/excise">Overview</a></li>
                                    
                                    <li><a href="/excise/api-reference/tax-determination/v5_18_0">API references</a></li>
                                    
                                    <li><a href="/excise/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara LandedCost</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/landedcost">Overview</a></li>
                                    
                                    <li><a href="/landedcost/api-reference/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                            <div class="col-sm-4">
                                <h2>Compliance document management</h2>
                                
                                <h4>Avalara CertCapture</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/certcapture">Overview</a></li>
                                    
                                    <li><a href="http://docs.certcapture6xrest.apiary.io/">API references</a></li>
                                    
                                    <li><a href="/certcapture/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                <h2>Returns &amp; filing</h2>
                                
                                
                                <h4>Avalara TrustFile</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/trustfile">Overview</a></li>
                                    
                                    <li><a href="/trustfile/api-reference/core/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                        </div>
                    </div>
                </li>
                <li class="certification"><a href="/certification"><span class="text-uppercase">Become Certified</span></a></li>
                <li class="resources dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Resources</span> <b class="caret"></b></a>
                    <ul class="dropdown-menu dropdown-menu-large">
                        <li><a href="/blog">Developer Blog</a></li>
                        <li><a href="/resources/preferred-developers">Preferred developers</a></li>
                        <li><a href="https://community.avalara.com/avalara/category_sets/developers">Help Forum</a></li>
                    </ul>
                </li>
                <li class="resources visible-xs-block"><a href="/blog"><span class="text-uppercase">Developer Blog</span></a></li>
                <li class="resources visible-xs-block"><a href="/resources/preferred-developers"><span class="text-uppercase">Preferred developers</span></a></li>
                <li class="resources visible-xs-block"><a href="https://community.avalara.com/avalara/category_sets/developers"><span class="text-uppercase">Help Forum</span></a></li>
                <li class="resources visible-xs-block"><a href="/search"><span class="text-uppercase">Search</span></a></li>
                <li class="hdr-search-icon hidden-xs">
                    <i class="mouse glyphicon glyphicon-search mouse"></i>
                </li>
                <form class="hdr-search-form horizontal hidden-xs hidden">
                    <div class="row">
                        
                        <div class="col-md-9"><label><input type="checkbox" id="filterSite"> Search entire site</label></div>
                        <div class="col-md-3">
                            <button type="button" class="close" aria-label="Close"><span>&times;</span></button>
                        </div>
                        
                    </div>
                    <div class="row">
                        <div class="form-group col-md-9">
                            <input class="form-control" type="search" placeholder="Search Developer / Avatax" >
                            <span class="form-control-feedback">!</span>
                        </div>
                        <div class="form-group col-md-3">
                            <input type="submit" class="btn btn-primary" value="Search">
                        </div>
                    </div>
                </form>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid use_cases">
    


<div class="breadcrumbs">
    <div class="col-md-12">
        <ul class="pipe">
            <li><span class="text-uppercase">Tax Calculation API</span>s</li>
            <li class="text-uppercase"><a href="/avatax">Avalara avaTax</a></li>
            <li class="text-uppercase">use cases</li>
        </ul>
    </div>
</div>

    
    <section class="row padding-sides half">
        <nav class="col-md-3">
            
            <ul class="api-ref-side-nav nav nav-pills nav-stacked hidden-xs hidden-sm">
    <li ><a href="/avatax/use-cases">Document Workflow</a></li>
    <li ><a href="/avatax/calculating-tax">Calculating Tax</a></li>
    <li ><a href="/avatax/address-validation">Address Validation</a></li>
    <li ><a href="/avatax/reportable-transactions">Reportable Transactions</a></li>
    <li class="active"><a href="/avatax/handling-return-invoices">Product Returns</a></li>
    <li ><a href="/avatax/handling-tax-exempt-customers">Exempt Transactions</a></li>
    <li ><a href="/avatax/voiding-documents">Voiding Documents</a></li>
    <li ><a href="/avatax/vat-transactions">VAT Transactions</a></li>
    <li ><a href="/avatax/drop-shipping">Drop Shipping</a></li>
    <li ><a href="/avatax/consumer-use-tax">Consumer Use Tax</a></li>
    <li ><a href="/avatax/automated-provisioning">Automated Provisioning</a></li>
    <li ><a href="/avatax/sample-code">Sample Code</a></li>
    <li ><a href="/avatax/soap-or-rest">SOAP or REST</a></li>
    <li ><a href="/avatax/finding-your-companyid">Finding Your CompanyId</a></li>
    <li ><a href="/avatax/proxy-server-settings">Proxy Server Settings</a></li>
    <li ><a href="/avatax/ssl-certificates">SSL Certificates</a></li>
    <li ><a href="/avatax/errors-and-outages">Errors and Outages</a></li>
    <li ><a href="/avatax/common-errors">Common Errors</a></li>
    <li ><a href="/avatax/service-availability-and-performance">Service Availability</a></li>
    <li ><a href="/avatax/going-live">Going Live</a></li>
</ul>
<div class="sm-section-nav dropdown visible-xs-block visible-sm-block">
    <button id="use-case-nav" type="button" data-toggle="dropdown">Use Cases</button>
    <ul class="dropdown-menu" aria-labelledby="use-case-nav">
        <li><a href="/avatax/use-cases">Document Workflow</a></li>
        <li><a href="/avatax/calculating-tax">Calculating Tax</a></li>
        <li><a href="/avatax/address-validation">Address Validation</a></li>
        <li><a href="/avatax/reportable-transactions">Reportable Transactions</a></li>
        <li><a href="/avatax/handling-return-invoices">Product Returns</a></li>
        <li><a href="/avatax/handling-tax-exempt-customers">Exempt Transactions</a></li>
        <li><a href="/avatax/voiding-documents">Voiding Documents</a></li>
        <li><a href="/avatax/vat-transactions">VAT Transactions</a></li>
        <li><a href="/avatax/drop-shipping">Drop Shipping</a></li>
        <li><a href="/avatax/consumer-use-tax">Consumer Use Tax</a></li>
        <li><a href="/avatax/automated-provisioning">Automated Provisioning</a></li>
        <li><a href="/avatax/sample-code">Sample Code</a></li>
        <li><a href="/avatax/soap-or-rest">SOAP or REST</a></li>
        <li><a href="/avatax/finding-your-companyid">Finding Your CompanyId</a></li>
        <li><a href="/avatax/proxy-server-settings">Proxy Server Settings</a></li>
        <li><a href="/avatax/ssl-certificates">SSL Certificates</a></li>
        <li><a href="/avatax/errors-and-outages">Errors and Outages</a></li>
        <li><a href="/avatax/common-errors">Common Errors</a></li>
        <li><a href="/avatax/service-availability-and-performance">Service Availability</a></li>
        <li><a href="/avatax/going-live">Going Live</a></li>
    </ul>
</div>

            
        </nav>
        <main class="col-md-9">

<h1>Product Returns
    
</h1>

<h2>Reflecting Returns and Credits Memos in AvaTax</h2>
<p>When you’re calculating tax on returns or credit memos through the API, there are a few things to keep in mind:</p>
<ul>
	<li>Avalara Avatax makes no direct association to the original invoice. That’s handled by you and your application.</li>
	<li>Send us negative extended sale amounts (qty * price) on your line items. This will make us calculate negative liability. Quantity should always be a positive value and price should always be negative to ensure that the amount is negative.</li>
	<li>Keep an eye on your DocCode. You can use the same DocCode as your original invoice exactly once if you send the return with DocType ReturnInvoice, but make sure you think about multiple returns associated with the same invoice.</li>
	<li>Dates. You want to report the return in the period in which it was processed, but it may have calculated tax in a previous period (which had different tax rates). To handle this, send the DocDate as the date of return processing, and use TaxOverride.TaxDate to send the date of the original invoice.</li>
</ul>
<p>Return Invoice or Credit Memo processing is largely a business practice that the developer and the business manager need to map out prior to coding or moving forward to a production environment. A thorough understanding of the API’s GetTaxRequest members and document states is key to developing an architecture suitable for processing returns in your development.</p>

<p>For the example provided below, we will process a return invoice on the following sales invoice, as seen on the Admin Console:</p>

<p><img src="/public/images/devdot/ProductReturns_Invoice.svg" alt="Invoice" width="100%" /></p>

<p>With the following line items:</p>

<p><img src="/public/images/devdot/ProductReturns_Lineitems.svg" alt="Line Items" width="100%" /></p>

<p>As you address returns processing, keep in mind that:</p>
<ul>
	<li>The document in question has (in this example) been committed, and the tax remitted to the appropriate jurisdiction.</li>
	<li>There may be multiple lines in the document.</li>
	<li>We need to work towards the eventual outcome of a complete or partial refund.
<ol>
	<li>Call GetTax with a duplicate of the document (invoice) you want to process returns on:
<ul>
	<li>Using the same invoice number AND DocType of ReturnInvoice or</li>
	<li>With a new invoice number (DocCode) with the original invoice number passed in the reference number field, or</li>
	<li>Re-use the original document’s invoice number with a “.1” or other change added to it.</li>
</ul>
</li>
</ol>
<blockquote><strong>Note:</strong> you can use a DocCode once per DocType. A DocStatusError will result if you attempt to commit a second document with the same DocType and DocCode</blockquote>
<img src="/public/images/devdot/ProductReturns_Invoiceandreturn.svg" alt="Invoice and Return" width="100%" />
<ol start="2">
	<li>Set the DocDate to the date when the return is being processed (not the date of the original order).</li>
	<li>Set the TaxOverride.TaxDate to reflect the original order date (this will override the date used for tax calculation so that the same taxes are calculated as were on the original order).
<ul>
	<li>Set TaxOverride.TaxOverrideType to TaxDate</li>
	<li>Set TaxOverride.TaxDate to the original order date</li>
	<li>Set TaxOverride.Reason to some string – this is an audit message for the TaxOverride.</li>
</ul>
</li>
</ol>
<blockquote><strong>NOTE:</strong> Pass only line items being returned -- do not include the line items that will not be returned unless all items are returned). In this example, we are returning line items 1 and 3.</blockquote>
<ol start="4">
	<li>Set the Amt property to a negative dollar amount on the line items (always leave the Qty as a positive number)</li>
</ol>
&lt;img src="/public/images/devdot/ProductReturns_Returnedlineitems.svg" alt="Returned Line Items"width="100%" /&gt;</li>
</ul>
<p>Once sent to the AvaTax web service, the tax engine will return negative tax amounts on the line items based on the TaxDate specified. If no TaxDate is set, the document date will be used to calculate tax. Taxable Amounts on a Return Invoice show negative amounts equal to the items returned.</p>

<p>Out of the 6 items originally processed, 2 items have been reversed on your tax reporting –- in this case $29.10 appears essentially as a “credit” on the current month’s tax liability.</p>

<hr />




<h4>Related Community Discussions</h4>
<div id="gsfn_list_widget">
<div id="gsfn_content">Loading...</div>
</div>
<script src="https://getsatisfaction.com/avalara/widgets/javascripts/f585970/widgets.js" type="text/javascript"></script><script src="https://getsatisfaction.com/avalara/topics.widget?callback=gsfnTopicsCallback&amp;length=240&amp;limit=5&amp;sort=recently_active&amp;user_defined_code=returns" type="text/javascript"></script>
<div id="getsat-widget-8157"></div>
<script src="https://loader.engage.gsfn.us/loader.js" type="text/javascript"></script><script type="text/javascript">// <![CDATA[
if (typeof GSFN !== "undefined") { GSFN.loadWidget(8157,{"containerId":"getsat-widget-8157"}); }
// ]]>
</script>

</main>
    </section>
    
    
</div>
<footer class="navbar navbar-default">
    <ul class="social">
        <li class="twitter"><a href="https://twitter.com/Avalara">Twitter</a></li>
        <li class="facebook"><a href="https://www.facebook.com/avalara">Facebook</a></li>
        <li class="linkedin"><a href="https://www.linkedin.com/company/avalara">LinkedIn</a></li>
        <li class="youtube"><a href="https://www.youtube.com/user/Avalara1">Youtube</a></li>
    </ul>
    
    
    <ul class="github">
        <li><a href="https://github.com/Avalara/developer-dot/edit/master/avatax/handling-return-invoices.md">Edit this page on GitHub</a></li>
    </ul>
    
    <ul class="global">
        <li><a href="https://www.avalara.com/"><span class="icon-sphere"></span>Avalara.com</a></li>
        <li><a href="https://help.avalara.com/"><span class="icon-help"></span>Help Center</a></li>
    </ul>
    <ul class="legal">
        <li>&copy; Avalara, Inc. All rights reserved</li>
        <li><a href="https://www.avalara.com/site-terms/">Terms of use</a></li>
        <li><a href="https://www.avalara.com/privacy-policy/">Privacy Policy</a></li>
    </ul>
</footer>

<script src="/public/js/vendor/jquery-2.2.4.min.js"></script>
<script src="/public/js/vendor/bootstrap.min.js"></script>
<script src="/public/js/site.js"></script>







<!-- Google Tag Manager -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKB5LP" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-MKB5LP');</script>
<!-- End Google Tag Manager -->
</body>
</html>
